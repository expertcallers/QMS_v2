{% extends "common_base.html" %}
{% block main %}
<style>
    #report {
        font-size: 18px;
    }
</style>
        <!-- page content -->
        <div class="right_col" role="main" id="report">
            <div class="row">
                <div class="card">
                    <div class="card-body">
                        <div class="col-md-12">
                            <div class="row">
                                <div class="col-md-12" align="center">
                                    <h1>Audit Report - {{form.campaign}} ({{form.campaign_type}})</h1>
                                </div>
                                <div class="col-md-12" style="display: inline-flex;">
                                    <h1>Result: </h1>
                                    <h1 id="result"></h1><span class="pt-4">(Threshold: {{campaign.threshold}}%)</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 bb fields">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Associate Name</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.associate_name}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Employee ID</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.emp_id}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Zone</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.zone}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Concept</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.concept}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Customer Name</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.customer_name}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Ticket Number/ID</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.ticket_id}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Query Type</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.query_type}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Email/Chat date</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.email_chat_date}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Audit Date</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.audit_date}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Quality Analyst</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.quality_analyst}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Team Lead</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.team_lead}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Manager</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.manager}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>AM</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.am}}</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h4>Week</h4>
                                        </div>
                                        <div class="col-md-6">
                                            <p>{{form.week}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 mt-3">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4>Solution</h4>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Understanding and Solved Customer's Issue
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="s_1">{{form.s_1}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Gave alternatives when required/applicable &amp; Displayed expert product knowledge
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="s_2">{{form.s_2}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Coupon code added/Edited Name/Values &amp; Date//Personalised when applicable
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="s_3">{{form.s_3}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                   Answered all question effectively
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="s_4">{{form.s_4}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8 score">
                                    Solution Score
                                </div>
                                <div class="col-md-4">
                                    <h4 id="s_score"></h4>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 mt-3">
                            <div class="row">
                                <div class="col-md-12">
                                    <h4>Efficiency</h4>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Resolved issue in a timely manner
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="e_1">{{form.e_1}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Categorized case properly/Check other Tickets &amp;Previous communition Merged
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="e_2">{{form.e_2}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8 score">
                                    Efficiency Score
                                </div>
                                <div class="col-md-4">
                                    <h4 id="e_score"></h4>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-12 mt-3">
                            <div class="row mt-3">
                                <div class="col-md-12">
                                    <h4>Compliance</h4>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Appropriate use of macros
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="c_1">{{form.compliance_1}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Magento was utilized correctly
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="c_2">{{form.compliance_2}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    Identified correct order type
                                </div>
                                <div class="col-md-4 form-group">
                                    <h5 id="c_3">{{form.compliance_3}}</h5>
                                </div>
                            </div>
                            <div class="row mt-3">
                                <div class="col-md-8 score">
                                    Compliance Score
                                </div>
                                <div class="col-md-4">
                                    <h4 id="c_score"></h4>
                                </div>
                            </div>
                        </div>


                        <div class="col-md-12" id="last">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Areas of improvement</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.areas_improvement}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Positives</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.positives}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Comments</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.comments}}</p>
                                </div>
                            </div>
                            {% if request.user.profile.emp_desi in mgr_list %}
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Audit Duration</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.audit_duration}}</p>
                                </div>
                            </div>
                            {% endif %}
                            {% if form.emp_comments %}
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Dispute Status</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.dispute_status}}</p>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Employee Comments</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.emp_comments}}</p>
                                </div>
                            </div>
                            {% endif %}
                            <div class="row mt-5 noborder">
                                <div class="col-md-6">
                                    <h5>Total Score</h5>
                                </div>
                                <div class="col-md-6">
                                    <h4 id="tot_score">{{form.overall_score}}</h4>
                                </div>
                                {% if request.user.profile.emp_desi in agent_list %}
                                {% if form.status == False %}
                                <div class="col-md-12 mt-3">
                                    <form action="/agent-respond" method="POST" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <label for="emp_com_accept">Employee Comments *</label>
                                        <input type="hidden" name="id" value="{{form.id}}">
                                        <input type="hidden" name="type" value="{{type}}">
                                        <textarea class="form-control" id="emp_com_accept" required rows="4" name="emp_com_accept"></textarea>
                                        <button class="btn btn-lg btn-success mt-2"><i class="fa fa-check"></i> Accept & Sign</button>
                                    </form>
                                </div>
                                <div class="col-md-12 mt-3">
                                    <form action="/agent-respond" method="POST" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <label for="emp_com_reject">Employee Comments *</label>
                                        <input type="hidden" name="type" value="{{type}}">
                                        <input type="hidden" name="id" value="{{form.id}}">
                                        <textarea class="form-control" id="emp_com_reject" required rows="4" name="emp_com_reject"></textarea>
                                        <button class="btn btn-lg btn-danger mt-2"><i class="fa fa-close"></i> Reject & Dispute</button>
                                    </form>
                                </div>
                                {% endif %}
                                {% endif %}
                                <div class="col-md-12 mt-3" align="center">
                                    <button class="btn btn-info btn-lg" onclick="history.back()">Back</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
 {% endblock %}


{% block scripts %}
<script type="text/javascript">
        var s_1 = parseInt($('#s_1').html());
    var s_2 = parseInt($('#s_2').html());
    var s_3 = parseInt($('#s_3').html());
    var s_4 = parseInt($('#s_4').html());
    $('#s_score').html(s_1+s_2+s_3+s_4);
    var e_1 = parseInt($('#e_1').html());
    var e_2 = parseInt($('#e_2').html());
    $('#e_score').html(e_1+e_2);
    var c_1 = parseInt($('#c_1').html());
    var c_2 = parseInt($('#c_2').html());
    var c_3 = parseInt($('#c_3').html());
    $('#c_score').html(c_1+c_2+c_3);

        var total = parseInt($('#tot_score').html());
        if (total < {{campaign.threshold}}) {
            $('#result').html("Fail");
            $('#result').css("color","red");
        } else {
            $('#result').html("Pass");
            $('#result').css("color","green");
        }
</script>
{% endblock %}