{% extends "common_base.html" %}
{% block main %}
<style>
    #report {
        font-size: 18px;
    }
</style>
<!-- page content -->
<div class="right_col" role="main" id="report">
    <div class="row">
        <div class="card">
            <div class="card-body">

                <div class="col-md-12">
                    <div class="row">
                        <div class="col-md-12" align="center">
                            <h1>Audit Report - {{form.campaign}} ({{form.campaign_type}})</h1>
                        </div>
                        <div class="col-md-12" style="display: inline-flex;">
                            <h1>Result: </h1>
                            <h1 id="result"></h1><span class="pt-4">(Threshold: {{campaign.threshold}}%)</span>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 fields">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Associate Name</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.associate_name}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Employee ID</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.emp_id}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Transaction Handled Date</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.transaction_handles_date}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Audit Date</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.audit_date}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Quality Analyst</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.quality_analyst}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Team Lead</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.team_lead}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Manager</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.manager}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>AM</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.am}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Week</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.week}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Service</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.service}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Order ID</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.order_id}}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="row">
                                <div class="col-md-6">
                                    <h4>Concept</h4>
                                </div>
                                <div class="col-md-6">
                                    <p>{{form.concept}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-12 mt-3">
                    <div class="row">
                        <div class="col-md-12">
                            <h4>Check List</h4>
                            <p>Unassigned/On Hold/Post Inspection Scheduled/ Inspection Scheduled Checklist/Inspected/Accepted By Vendor</p>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-8">
                            Check List Used Correctly
                        </div>
                        <div class="col-md-4 form-group">
                            <h5 id="cl_1">{{form.check_list}}</h5>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-8 score">
                            Check List Score
                        </div>
                        <div class="col-md-4">
                            <h4 id="cl_score"></h4>
                        </div>
                    </div>
                </div>


                <div class="col-md-12" id="last">
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Reason for Failure</h4>
                        </div>
                        <div class="col-md-6">
                            <p>{{form.reason_for_failure}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Areas of improvement</h4>
                        </div>
                        <div class="col-md-6">
                            <p>{{form.areas_improvement}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Positives</h4>
                        </div>
                        <div class="col-md-6">
                            <p>{{form.positives}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Comments</h4>
                        </div>
                        <div class="col-md-6">
                            <p>{{form.comments}}</p>
                        </div>
                    </div>
                    {% if form.emp_comments %}
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Dispute Status</h4>
                        </div>
                        <div class="col-md-6">
                            <p>{{form.dispute_status}}</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <h4>Employee Comments</h4>
                        </div>
                        <div class="col-md-6">
                            <p>{{form.emp_comments}}</p>
                        </div>
                    </div>
                    {% endif %}
                    <div class="row mt-5 noborder">
                        <div class="col-md-6">
                            <h5>Total Score</h5>
                        </div>
                        <div class="col-md-6">
                            <h4 id="tot_score">{{form.overall_score}}</h4>
                        </div>
                        {% if request.user.profile.emp_desi in agent_list %}
                        {% if form.status == False %}
                        <div class="col-md-12 mt-3">
                            <form action="/agent-respond" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <label for="emp_com_accept">Employee Comments *</label>
                                <input type="hidden" name="id" value="{{form.id}}">
                                <input type="hidden" name="type" value="{{type}}">
                                <textarea class="form-control" id="emp_com_accept" required rows="4" name="emp_com_accept"></textarea>
                                <button class="btn btn-lg btn-success mt-2"><i class="fa fa-check"></i> Accept & Sign</button>
                            </form>
                        </div>
                        <div class="col-md-12 mt-3">
                            <form action="/agent-respond" method="POST" enctype="multipart/form-data">
                                {% csrf_token %}
                                <label for="emp_com_reject">Employee Comments *</label>
                                <input type="hidden" name="type" value="{{type}}">
                                <input type="hidden" name="id" value="{{form.id}}">
                                <textarea class="form-control" id="emp_com_reject" required rows="4" name="emp_com_reject"></textarea>
                                <button class="btn btn-lg btn-danger mt-2"><i class="fa fa-close"></i> Reject & Dispute</button>
                            </form>
                        </div>
                        {% endif %}
                        {% endif %}
                        <div class="col-md-12 mt-3" align="center">
                            <button class="btn btn-info btn-lg" onclick="history.back()">Back</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}


{% block scripts %}
   


<script type="text/javascript">
    var cl_1 = parseInt($('#cl_1').html());
    $('#cl_score').html(cl_1);


        var total = parseInt($('#tot_score').html());
        if (total < {{campaign.threshold}}) {
            $('#result').html("Fail");
            $('#result').css("color","red");
        } else {
            $('#result').html("Pass");
            $('#result').css("color","green");
        }
</script>
{% endblock %}